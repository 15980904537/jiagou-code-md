- `static.js`

```javascript
const { resolve } = require('path')
const mime = require('mime')

const path = require('path')
const fs = require('fs').promises
function static(dirname) {
  return async (ctx, next) => {
    let filePath = path.join(dirname, ctx.path)
    //文件路径不是一个文件 就不能处理 需要调用下一个中间件 如果自己能处理 就不需要向下执行

    try {
      const statObj = await fs.stat(filePath)
      if (statObj.isDirectory()) {
        filePath = path.join(filePath, 'index.html')
      }
      ctx.set('Content-Type', mime.getType(filePath) + ';charset-utf-8')
      ctx.body = await fs.access(filePath)
    } catch (err) {
      await next() //自己处理不了向下执行
    }
  }
}

module.exports = static
```

- `router.js`

```javascript
```
